(function(){var n,e,t,i,r,c,o,f,l;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");i=Offline.reconnect={},c=null,r=function(){var n;return null!=i.state&&"inactive"!==i.state&&Offline.trigger("reconnect:stopped"),i.state="inactive",i.remaining=i.delay=null!=(n=Offline.getOption("reconnect.initialDelay"))?n:3},e=function(){var n,e;return n=null!=(e=Offline.getOption("reconnect.delay"))?e:Math.min(Math.ceil(1.5*i.delay),3600),i.remaining=i.delay=n},o=function(){return"connecting"!==i.state?(i.remaining-=1,Offline.trigger("reconnect:tick"),0===i.remaining?f():void 0):void 0},f=function(){return"waiting"===i.state?(Offline.trigger("reconnect:connecting"),i.state="connecting",Offline.check()):void 0},n=function(){return Offline.getOption("reconnect")?(r(),i.state="waiting",Offline.trigger("reconnect:started"),c=setInterval(o,1e3)):void 0},l=function(){return null!=c&&clearInterval(c),r()},t=function(){return Offline.getOption("reconnect")&&"connecting"===i.state?(Offline.trigger("reconnect:failure"),i.state="waiting",e()):void 0},i.tryNow=f,r(),Offline.on("down",n),Offline.on("confirmed-down",t),Offline.on("up",l)}).call(this);