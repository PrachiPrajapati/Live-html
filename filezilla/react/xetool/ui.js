(function(){var n,e,t,i,o,f,u,r,c,l,a,d,s;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");e='<div class="offline-ui"><div class="offline-ui-content"></div></div>',n='<a href class="offline-ui-retry"></a>',f=function(n){var e;return e=document.createElement("div"),e.innerHTML=n,e.children[0]},u=o=null,i=function(n){return a(n),u.className+=" "+n},a=function(n){return u.className=u.className.replace(new RegExp("(^| )"+n.split(" ").join("|")+"( |$)","gi")," ")},c={},r=function(n,e){return i(n),null!=c[n]&&clearTimeout(c[n]),c[n]=setTimeout(function(){return a(n),delete c[n]},1e3*e)},s=function(n){var e,t,i,o;i={day:86400,hour:3600,minute:60,second:1};for(t in i)if(e=i[t],n>=e)return o=Math.floor(n/e),[o,t];return["now",""]},d=function(){var t,r;return u=f(e),document.body.appendChild(u),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(u.appendChild(f(n)),t=u.querySelector(".offline-ui-retry"),r=function(n){return n.preventDefault(),Offline.reconnect.tryNow()},null!=t.addEventListener?t.addEventListener("click",r,!1):t.attachEvent("click",r)),i("offline-ui-"+Offline.state),o=u.querySelector(".offline-ui-content")},l=function(){return d(),Offline.on("up",function(){return a("offline-ui-down"),i("offline-ui-up"),r("offline-ui-up-2s",2),r("offline-ui-up-5s",5)}),Offline.on("down",function(){return a("offline-ui-up"),i("offline-ui-down"),r("offline-ui-down-2s",2),r("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return i("offline-ui-connecting"),a("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var n,e,t;return i("offline-ui-waiting"),a("offline-ui-connecting"),n=s(Offline.reconnect.remaining),e=n[0],t=n[1],o.setAttribute("data-retry-in-value",e),o.setAttribute("data-retry-in-unit",t)}),Offline.on("reconnect:stopped",function(){return a("offline-ui-connecting offline-ui-waiting"),o.setAttribute("data-retry-in-value",null),o.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return r("offline-ui-reconnect-failed-2s",2),r("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return r("offline-ui-reconnect-succeeded-2s",2),r("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?l():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",l,!1):(t=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&l(),"function"==typeof t?t.apply(null,arguments):void 0})}).call(this);