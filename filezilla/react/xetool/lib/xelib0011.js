"use strict";var qrcodegen=new function(){this.QrCode=function(t,r,v,d){if(r<-1||7<r)throw"Mask value out of range";if(t instanceof Array){if(v<1||40<v)throw"Version value out of range"}else{if(!(t instanceof qrcodegen.QrCode))throw"Invalid initial data";if(null!=v||null!=d)throw"Values must be undefined";v=t.version,d=t.errorCorrectionLevel}for(var c=4*v+17,e=[],n=0;n<c;n++)e.push(!1);var g=[],s=[];for(n=0;n<c;n++)g.push(e.slice()),s.push(e.slice());if(t instanceof Array){!function(){for(var t=0;t<c;t++)m(6,t,t%2==0),m(t,6,t%2==0);h(3,3),h(c-4,3),h(3,c-4);var r=w.getAlignmentPatternPositions(v),e=r.length;for(t=0;t<e;t++)for(var n=0;n<e;n++)0==t&&0==n||0==t&&n==e-1||t==e-1&&0==n||l(r[t],r[n]);u(0),function(){if(v<7)return;for(var t=v,r=0;r<12;r++)t=t<<1^7973*(t>>>11);var e=v<<12|t;if(e>>>18!=0)throw"Assertion error";for(r=0;r<18;r++){var n=0!=(e>>>r&1),o=c-11+r%3,a=Math.floor(r/3);m(o,a,n),m(a,o,n)}}()}(),function(t){if(t.length!=Math.floor(w.getNumRawDataModules(v)/8))throw"Invalid argument";for(var r=0,e=c-1;1<=e;e-=2){6==e&&(e=5);for(var n=0;n<c;n++)for(var o=0;o<2;o++){var a=e-o,i=0==(2&e)^a<6?c-1-n:n;!s[i][a]&&r<8*t.length&&(g[i][a]=0!=(t[r>>>3]>>>7-(7&r)&1),r++)}}if(r!=8*t.length)throw"Assertion error"}(function(t){if(t.length!=w.getNumDataCodewords(v,d))throw"Invalid argument";var r=w.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][v],e=w.NUM_ERROR_CORRECTION_CODEWORDS[d.ordinal][v];if(e%r!=0)throw"Assertion error";for(var n=Math.floor(e/r),o=r-Math.floor(w.getNumRawDataModules(v)/8)%r,a=Math.floor(w.getNumRawDataModules(v)/(8*r)),i=[],s=new C(n),f=0,u=0;f<r;f++){var h=t.slice(u,u+a-n+(f<o?0:1));u+=h.length;var l=s.getRemainder(h);f<o&&h.push(0),l.forEach(function(t){h.push(t)}),i.push(h)}var c=[];for(f=0;f<i[0].length;f++)for(var g=0;g<i.length;g++)(f!=a-n||o<=g)&&c.push(i[g][f]);if(c.length!=Math.floor(w.getNumRawDataModules(v)/8))throw"Assertion error";return c}(t))}else{if(!(t instanceof qrcodegen.QrCode))throw"Invalid initial data";for(var o=0;o<c;o++)for(var a=0;a<c;a++)g[o][a]=1==t.getModule(a,o),s[o][a]=t.isFunctionModule(a,o);E(t.mask)}if(-1==r){var i=1/0;for(n=0;n<8;n++){u(n),E(n);var f=N();f<i&&(r=n,i=f),E(n)}}if(r<0||7<r)throw"Assertion error";function u(t){for(var r=d.formatBits<<3|t,e=r,n=0;n<10;n++)e=e<<1^1335*(e>>>9);if(r=r<<10|e,(r^=21522)>>>15!=0)throw"Assertion error";for(n=0;n<=5;n++)m(8,n,0!=(r>>>n&1));m(8,7,0!=(r>>>6&1)),m(8,8,0!=(r>>>7&1)),m(7,8,0!=(r>>>8&1));for(n=9;n<15;n++)m(14-n,8,0!=(r>>>n&1));for(n=0;n<=7;n++)m(c-1-n,8,0!=(r>>>n&1));for(n=8;n<15;n++)m(8,c-15+n,0!=(r>>>n&1));m(8,c-8,!0)}function h(t,r){for(var e=-4;e<=4;e++)for(var n=-4;n<=4;n++){var o=Math.max(Math.abs(e),Math.abs(n)),a=t+n,i=r+e;0<=a&&a<c&&0<=i&&i<c&&m(a,i,2!=o&&4!=o)}}function l(t,r){for(var e=-2;e<=2;e++)for(var n=-2;n<=2;n++)m(t+n,r+e,1!=Math.max(Math.abs(e),Math.abs(n)))}function m(t,r,e){g[r][t]=e,s[r][t]=!0}function E(t){if(t<0||7<t)throw"Mask value out of range";for(var r=0;r<c;r++)for(var e=0;e<c;e++){var n;switch(t){case 0:n=(e+r)%2==0;break;case 1:n=r%2==0;break;case 2:n=e%3==0;break;case 3:n=(e+r)%3==0;break;case 4:n=(Math.floor(e/3)+Math.floor(r/2))%2==0;break;case 5:n=e*r%2+e*r%3==0;break;case 6:n=(e*r%2+e*r%3)%2==0;break;case 7:n=((e+r)%2+e*r%3)%2==0;break;default:throw"Assertion error"}g[r][e]^=n&!s[r][e]}}function N(){for(var t=0,r=0;r<c;r++)for(var e=g[r][0],n=1,o=1;n<c;n++)g[r][n]!=e?(e=g[r][n],o=1):5==++o?t+=w.PENALTY_N1:5<o&&t++;for(n=0;n<c;n++)for(var a=g[0][n],i=(r=1,1);r<c;r++)g[r][n]!=a?(a=g[r][n],i=1):5==++i?t+=w.PENALTY_N1:5<i&&t++;for(r=0;r<c-1;r++)for(n=0;n<c-1;n++){var s=g[r][n];s==g[r][n+1]&&s==g[r+1][n]&&s==g[r+1][n+1]&&(t+=w.PENALTY_N2)}for(r=0;r<c;r++){n=0;for(var f=0;n<c;n++)f=f<<1&2047|(g[r][n]?1:0),10<=n&&(93==f||1488==f)&&(t+=w.PENALTY_N3)}for(n=0;n<c;n++)for(r=0,f=0;r<c;r++)f=f<<1&2047|(g[r][n]?1:0),10<=r&&(93==f||1488==f)&&(t+=w.PENALTY_N3);var u=0;g.forEach(function(t){t.forEach(function(t){t&&u++})});for(var h=c*c,l=0;20*u<(9-l)*h||(11+l)*h<20*u;l++)t+=w.PENALTY_N4;return t}u(r),E(r),Object.defineProperty(this,"version",{value:v}),Object.defineProperty(this,"size",{value:c}),Object.defineProperty(this,"errorCorrectionLevel",{value:d}),Object.defineProperty(this,"mask",{value:r}),this.getModule=function(t,r){return 0<=t&&t<c&&0<=r&&r<c&&g[r][t]?1:0},this.isFunctionModule=function(t,r){return 0<=t&&t<c&&0<=r&&r<c&&s[r][t]},this.drawCanvas=function(t,r,e){if(t<=0||r<0)throw"Value out of range";var n=(c+2*r)*t;e.width=n,e.height=n;for(var o=e.getContext("2d"),a=-r;a<c+r;a++)for(var i=-r;i<c+r;i++)o.fillStyle=1==this.getModule(i,a)?"#000000":"#FFFFFF",o.fillRect((i+r)*t,(a+r)*t,t,t)},this.toSvgString=function(t){if(t<0)throw"Border must be non-negative";for(var r="",e=!0,n=-t;n<c+t;n++)for(var o=-t;o<c+t;o++)1==this.getModule(o,n)&&(e?e=!1:r+=" ",r+="M"+(o+t)+","+(n+t)+"h1v1h-1z");return r}},this.QrCode.encodeText=function(t,r){var e=qrcodegen.QrSegment.makeSegments(t);return this.encodeSegments(e,r)},this.QrCode.encodeBinary=function(t,r){var e=qrcodegen.QrSegment.makeBytes(t);return this.encodeSegments([e],r)},this.QrCode.encodeSegments=function(t,r,e,n,o,a){if(null==e&&(e=1),null==n&&(n=40),null==o&&(o=-1),null==a&&(a=!0),!(1<=e&&e<=n&&n<=40)||o<-1||7<o)throw"Invalid value";var i,s;for(i=e;;i++){var f=8*w.getNumDataCodewords(i,r);if(null!=(s=qrcodegen.QrSegment.getTotalBits(t,i))&&s<=f)break;if(n<=i)throw"Data too long"}[this.Ecc.MEDIUM,this.Ecc.QUARTILE,this.Ecc.HIGH].forEach(function(t){a&&s<=8*w.getNumDataCodewords(i,t)&&(r=t)});f=8*w.getNumDataCodewords(i,r);var u=new l;t.forEach(function(t){u.appendBits(t.mode.modeBits,4),u.appendBits(t.numChars,t.mode.numCharCountBits(i)),u.appendData(t)}),u.appendBits(0,Math.min(4,f-u.bitLength())),u.appendBits(0,(8-u.bitLength()%8)%8);for(var h=236;u.bitLength()<f;h^=253)u.appendBits(h,8);if(u.bitLength()%8!=0)throw"Assertion error";return new this(u.getBytes(),o,i,r)};var w={};function t(t,r){Object.defineProperty(this,"ordinal",{value:t}),Object.defineProperty(this,"formatBits",{value:r})}w.getAlignmentPatternPositions=function(t){if(t<1||40<t)throw"Version number out of range";if(1==t)return[];var r,e=4*t+17,n=Math.floor(t/7)+2;r=32!=t?2*Math.ceil((e-13)/(2*n-2)):26;for(var o=[6],a=0,i=e-7;a<n-1;a++,i-=r)o.splice(1,0,i);return o},w.getNumRawDataModules=function(t){if(t<1||40<t)throw"Version number out of range";var r=(16*t+128)*t+64;if(2<=t){var e=Math.floor(t/7)+2;r-=(25*e-10)*e-55,7<=t&&(r-=36)}return r},w.getNumDataCodewords=function(t,r){if(t<1||40<t)throw"Version number out of range";return Math.floor(w.getNumRawDataModules(t)/8)-w.NUM_ERROR_CORRECTION_CODEWORDS[r.ordinal][t]},w.PENALTY_N1=3,w.PENALTY_N2=3,w.PENALTY_N3=40,w.PENALTY_N4=10,w.NUM_ERROR_CORRECTION_CODEWORDS=[[null,7,10,15,20,26,36,40,48,60,72,80,96,104,120,132,144,168,180,196,224,224,252,270,300,312,336,360,390,420,450,480,510,540,570,570,600,630,660,720,750],[null,10,16,26,36,48,64,72,88,110,130,150,176,198,216,240,280,308,338,364,416,442,476,504,560,588,644,700,728,784,812,868,924,980,1036,1064,1120,1204,1260,1316,1372],[null,13,22,36,52,72,96,108,132,160,192,224,260,288,320,360,408,448,504,546,600,644,690,750,810,870,952,1020,1050,1140,1200,1290,1350,1440,1530,1590,1680,1770,1860,1950,2040],[null,17,28,44,64,88,112,130,156,192,224,264,308,352,384,432,480,532,588,650,700,750,816,900,960,1050,1110,1200,1260,1350,1440,1530,1620,1710,1800,1890,1980,2100,2220,2310,2430]],w.NUM_ERROR_CORRECTION_BLOCKS=[[null,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[null,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[null,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[null,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],this.QrCode.Ecc={LOW:new t(0,1),MEDIUM:new t(1,0),QUARTILE:new t(2,3),HIGH:new t(3,2)},this.QrSegment=function(t,r,e){if(r<0||!(t instanceof n))throw"Invalid argument";Object.defineProperty(this,"mode",{value:t}),Object.defineProperty(this,"numChars",{value:r}),this.getBits=function(){return e.slice()}},this.QrSegment.makeBytes=function(t){var r=new l;return t.forEach(function(t){r.appendBits(t,8)}),new this(this.Mode.BYTE,t.length,r.getBits())},this.QrSegment.makeNumeric=function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";var r,e=new l;for(r=0;r+3<=t.length;r+=3)e.appendBits(parseInt(t.substr(r,3),10),10);var n=t.length-r;return 0<n&&e.appendBits(parseInt(t.substring(r),10),3*n+1),new this(this.Mode.NUMERIC,t.length,e.getBits())},this.QrSegment.makeAlphanumeric=function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var r,e=new l;for(r=0;r+2<=t.length;r+=2){var n=45*o.ALPHANUMERIC_ENCODING_TABLE[t.charCodeAt(r)-32];n+=o.ALPHANUMERIC_ENCODING_TABLE[t.charCodeAt(r+1)-32],e.appendBits(n,11)}return r<t.length&&e.appendBits(o.ALPHANUMERIC_ENCODING_TABLE[t.charCodeAt(r)-32],6),new this(this.Mode.ALPHANUMERIC,t.length,e.getBits())},this.QrSegment.makeSegments=function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[this.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[this.makeAlphanumeric(t)]:[this.makeBytes(function(t){t=encodeURI(t);for(var r=[],e=0;e<t.length;e++)"%"!=t.charAt(e)?r.push(t.charCodeAt(e)):(r.push(parseInt(t.substr(e+1,2),16)),e+=2);return r}(t))]},this.QrSegment.getTotalBits=function(t,r){if(r<1||40<r)throw"Version number out of range";for(var e=0,n=0;n<t.length;n++){var o=t[n],a=o.mode.numCharCountBits(r);if(o.numChars>=1<<a)return null;e+=4+a+o.getBits().length}return e};var o={};function n(t,r){Object.defineProperty(this,"modeBits",{value:t}),this.numCharCountBits=function(t){if(1<=t&&t<=9)return r[0];if(10<=t&&t<=26)return r[1];if(27<=t&&t<=40)return r[2];throw"Version number out of range"}}function C(t){if(t<1||255<t)throw"Degree out of range";for(var o=[],r=0;r<t-1;r++)o.push(0);o.push(1);var e=1;for(r=0;r<t;r++){for(var n=0;n<o.length;n++)o[n]=C.multiply(o[n],e),n+1<o.length&&(o[n]^=o[n+1]);e=e<<1^285*(e>>>7)}this.getRemainder=function(t){var n=o.map(function(){return 0});return t.forEach(function(t){var r=t^n[0];n.shift(),n.push(0);for(var e=0;e<n.length;e++)n[e]^=C.multiply(o[e],r)}),n}}function l(){var n=[];this.bitLength=function(){return n.length},this.getBits=function(){return n.slice()},this.getBytes=function(){for(var e=[],t=Math.ceil(n.length/8),r=0;r<t;r++)e.push(0);return n.forEach(function(t,r){e[r>>>3]|=t<<7-(7&r)}),e},this.appendBits=function(t,r){if(r<0||32<r||r<32&&t>>>r!=0)throw"Value out of range";for(var e=r-1;0<=e;e--)n.push(t>>>e&1)},this.appendData=function(t){t.getBits().forEach(function(t){n.push(t)})}}this.QrSegment.NUMERIC_REGEX=/^[0-9]*$/,this.QrSegment.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_ENCODING_TABLE=[36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],this.QrSegment.Mode={NUMERIC:new n(1,[10,12,14]),ALPHANUMERIC:new n(2,[9,11,13]),BYTE:new n(4,[8,16,16]),KANJI:new n(8,[8,10,12])},C.multiply=function(t,r){if(t>>>8!=0||r>>>8!=0)throw"Byte out of range";for(var e=0,n=7;0<=n;n--)e=e<<1^285*(e>>>7),e^=(r>>>n&1)*t;if(e>>>8!=0)throw"Assertion error";return e}};